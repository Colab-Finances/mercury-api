version: "3.8"

services:
  planner_api:
    dns:
      - 8.8.8.8
    build:
      context: ./ # We need run this from the root of the project
      dockerfile: ./docker/planner/test/fastapi/Dockerfile
    env_file:
      - .env.test
    depends_on:
      - database
      - document_db
  database:
    image: postgres:15
    env_file:
      - .env.test

  document_db:
    image: mongo:7
    env_file:
      - .env.test
    environment:
      - MONGO_INITDB_ROOT_USERNAME=${MONGO_USER}
      - MONGO_INITDB_ROOT_PASSWORD=${MONGO_PASSWORD}
